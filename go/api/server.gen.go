// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/deepmap/oapi-codegen/v2 version 2.1.0 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"context"
	"encoding/base64"
	"encoding/json"
	"fmt"
	"net/http"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
	"github.com/gin-gonic/gin"
	"github.com/oapi-codegen/runtime"
	strictgin "github.com/oapi-codegen/runtime/strictmiddleware/gin"
)

// ServerInterface represents all server handlers.
type ServerInterface interface {
	// Health check
	// (GET /healthz)
	GetHealthz(c *gin.Context)
	// Health check
	// (HEAD /healthz)
	HeadHealthz(c *gin.Context)
	// Create a Personal Access Token (PAT)
	// (POST /pat)
	PostPat(c *gin.Context)
	// Sign in with email and password
	// (POST /signin/email-password)
	PostSigninEmailPassword(c *gin.Context)
	// Sign in with magic link sent to user's email. If user doesn't exist, it will be created. The options object is optional and can be used to set the user's when signing up a new user. It is ignored if the user already exists.
	// (POST /signin/passwordless/email)
	PostSigninPasswordlessEmail(c *gin.Context)
	// Sign in with Personal Access Token (PAT)
	// (POST /signin/pat)
	PostSigninPat(c *gin.Context)
	// Sign in with SSO
	// (GET /signin/sso/{provider})
	GetSigninSsoProvider(c *gin.Context, provider string, params GetSigninSsoProviderParams)
	// Sign in with SSO (callback)
	// (GET /signin/sso/{provider}/callback)
	GetSigninSsoProviderCallback(c *gin.Context, provider string, params GetSigninSsoProviderCallbackParams)
	// Signup with email and password
	// (POST /signup/email-password)
	PostSignupEmailPassword(c *gin.Context)
	// Signup with webauthn
	// (POST /signup/webauthn)
	PostSignupWebauthn(c *gin.Context)
	// Verify webauthn signup
	// (POST /signup/webauthn/verify)
	PostSignupWebauthnVerify(c *gin.Context)
	// Refresh the JWT access token
	// (POST /token)
	PostToken(c *gin.Context)
	// Deanonymize an anonymous user in adding missing email or email+password, depending on the chosen authentication method. Will send a confirmation email if the server is configured to do so
	// (POST /user/deanonymize)
	PostUserDeanonymize(c *gin.Context)
	// Change user email
	// (POST /user/email/change)
	PostUserEmailChange(c *gin.Context)
	// Send email verification email
	// (POST /user/email/send-verification-email)
	PostUserEmailSendVerificationEmail(c *gin.Context)
	// Request a password reset. An email with a verification link will be sent to the user's address
	// (POST /user/password/reset)
	PostUserPasswordReset(c *gin.Context)
	// Get version
	// (GET /version)
	GetVersion(c *gin.Context)
}

// ServerInterfaceWrapper converts contexts to parameters.
type ServerInterfaceWrapper struct {
	Handler            ServerInterface
	HandlerMiddlewares []MiddlewareFunc
	ErrorHandler       func(*gin.Context, error, int)
}

type MiddlewareFunc func(c *gin.Context)

// GetHealthz operation middleware
func (siw *ServerInterfaceWrapper) GetHealthz(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetHealthz(c)
}

// HeadHealthz operation middleware
func (siw *ServerInterfaceWrapper) HeadHealthz(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.HeadHealthz(c)
}

// PostPat operation middleware
func (siw *ServerInterfaceWrapper) PostPat(c *gin.Context) {

	c.Set(BearerAuthElevatedScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostPat(c)
}

// PostSigninEmailPassword operation middleware
func (siw *ServerInterfaceWrapper) PostSigninEmailPassword(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostSigninEmailPassword(c)
}

// PostSigninPasswordlessEmail operation middleware
func (siw *ServerInterfaceWrapper) PostSigninPasswordlessEmail(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostSigninPasswordlessEmail(c)
}

// PostSigninPat operation middleware
func (siw *ServerInterfaceWrapper) PostSigninPat(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostSigninPat(c)
}

// GetSigninSsoProvider operation middleware
func (siw *ServerInterfaceWrapper) GetSigninSsoProvider(c *gin.Context) {

	var err error

	// ------------- Path parameter "provider" -------------
	var provider string

	err = runtime.BindStyledParameterWithOptions("simple", "provider", c.Param("provider"), &provider, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter provider: %w", err), http.StatusBadRequest)
		return
	}

	// Parameter object where we will unmarshal all parameters from the context
	var params GetSigninSsoProviderParams

	// ------------- Optional query parameter "redirectTo" -------------

	err = runtime.BindQueryParameter("form", true, false, "redirectTo", c.Request.URL.Query(), &params.RedirectTo)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter redirectTo: %w", err), http.StatusBadRequest)
		return
	}

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetSigninSsoProvider(c, provider, params)
}

// GetSigninSsoProviderCallback operation middleware
func (siw *ServerInterfaceWrapper) GetSigninSsoProviderCallback(c *gin.Context) {

	var err error

	// ------------- Path parameter "provider" -------------
	var provider string

	err = runtime.BindStyledParameterWithOptions("simple", "provider", c.Param("provider"), &provider, runtime.BindStyledParameterOptions{Explode: false, Required: true})
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter provider: %w", err), http.StatusBadRequest)
		return
	}

	// Parameter object where we will unmarshal all parameters from the context
	var params GetSigninSsoProviderCallbackParams

	// ------------- Required query parameter "state" -------------

	if paramValue := c.Query("state"); paramValue != "" {

	} else {
		siw.ErrorHandler(c, fmt.Errorf("Query argument state is required, but not found"), http.StatusBadRequest)
		return
	}

	err = runtime.BindQueryParameter("form", true, true, "state", c.Request.URL.Query(), &params.State)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter state: %w", err), http.StatusBadRequest)
		return
	}

	// ------------- Required query parameter "code" -------------

	if paramValue := c.Query("code"); paramValue != "" {

	} else {
		siw.ErrorHandler(c, fmt.Errorf("Query argument code is required, but not found"), http.StatusBadRequest)
		return
	}

	err = runtime.BindQueryParameter("form", true, true, "code", c.Request.URL.Query(), &params.Code)
	if err != nil {
		siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter code: %w", err), http.StatusBadRequest)
		return
	}

	{
		var cookie string

		if cookie, err = c.Cookie("nhost_auth_sso_flow_data"); err == nil {
			var value string
			err = runtime.BindStyledParameterWithOptions("simple", "nhost_auth_sso_flow_data", cookie, &value, runtime.BindStyledParameterOptions{Explode: true, Required: true})
			if err != nil {
				siw.ErrorHandler(c, fmt.Errorf("Invalid format for parameter nhost_auth_sso_flow_data: %w", err), http.StatusBadRequest)
				return
			}
			params.NhostAuthSsoFlowData = value

		} else {
			siw.ErrorHandler(c, fmt.Errorf("Query argument nhost_auth_sso_flow_data is required, but not found"), http.StatusBadRequest)
			return
		}
	}

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetSigninSsoProviderCallback(c, provider, params)
}

// PostSignupEmailPassword operation middleware
func (siw *ServerInterfaceWrapper) PostSignupEmailPassword(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostSignupEmailPassword(c)
}

// PostSignupWebauthn operation middleware
func (siw *ServerInterfaceWrapper) PostSignupWebauthn(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostSignupWebauthn(c)
}

// PostSignupWebauthnVerify operation middleware
func (siw *ServerInterfaceWrapper) PostSignupWebauthnVerify(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostSignupWebauthnVerify(c)
}

// PostToken operation middleware
func (siw *ServerInterfaceWrapper) PostToken(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostToken(c)
}

// PostUserDeanonymize operation middleware
func (siw *ServerInterfaceWrapper) PostUserDeanonymize(c *gin.Context) {

	c.Set(BearerAuthScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostUserDeanonymize(c)
}

// PostUserEmailChange operation middleware
func (siw *ServerInterfaceWrapper) PostUserEmailChange(c *gin.Context) {

	c.Set(BearerAuthElevatedScopes, []string{})

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostUserEmailChange(c)
}

// PostUserEmailSendVerificationEmail operation middleware
func (siw *ServerInterfaceWrapper) PostUserEmailSendVerificationEmail(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostUserEmailSendVerificationEmail(c)
}

// PostUserPasswordReset operation middleware
func (siw *ServerInterfaceWrapper) PostUserPasswordReset(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.PostUserPasswordReset(c)
}

// GetVersion operation middleware
func (siw *ServerInterfaceWrapper) GetVersion(c *gin.Context) {

	for _, middleware := range siw.HandlerMiddlewares {
		middleware(c)
		if c.IsAborted() {
			return
		}
	}

	siw.Handler.GetVersion(c)
}

// GinServerOptions provides options for the Gin server.
type GinServerOptions struct {
	BaseURL      string
	Middlewares  []MiddlewareFunc
	ErrorHandler func(*gin.Context, error, int)
}

// RegisterHandlers creates http.Handler with routing matching OpenAPI spec.
func RegisterHandlers(router gin.IRouter, si ServerInterface) {
	RegisterHandlersWithOptions(router, si, GinServerOptions{})
}

// RegisterHandlersWithOptions creates http.Handler with additional options
func RegisterHandlersWithOptions(router gin.IRouter, si ServerInterface, options GinServerOptions) {
	errorHandler := options.ErrorHandler
	if errorHandler == nil {
		errorHandler = func(c *gin.Context, err error, statusCode int) {
			c.JSON(statusCode, gin.H{"msg": err.Error()})
		}
	}

	wrapper := ServerInterfaceWrapper{
		Handler:            si,
		HandlerMiddlewares: options.Middlewares,
		ErrorHandler:       errorHandler,
	}

	router.GET(options.BaseURL+"/healthz", wrapper.GetHealthz)
	router.HEAD(options.BaseURL+"/healthz", wrapper.HeadHealthz)
	router.POST(options.BaseURL+"/pat", wrapper.PostPat)
	router.POST(options.BaseURL+"/signin/email-password", wrapper.PostSigninEmailPassword)
	router.POST(options.BaseURL+"/signin/passwordless/email", wrapper.PostSigninPasswordlessEmail)
	router.POST(options.BaseURL+"/signin/pat", wrapper.PostSigninPat)
	router.GET(options.BaseURL+"/signin/sso/:provider", wrapper.GetSigninSsoProvider)
	router.GET(options.BaseURL+"/signin/sso/:provider/callback", wrapper.GetSigninSsoProviderCallback)
	router.POST(options.BaseURL+"/signup/email-password", wrapper.PostSignupEmailPassword)
	router.POST(options.BaseURL+"/signup/webauthn", wrapper.PostSignupWebauthn)
	router.POST(options.BaseURL+"/signup/webauthn/verify", wrapper.PostSignupWebauthnVerify)
	router.POST(options.BaseURL+"/token", wrapper.PostToken)
	router.POST(options.BaseURL+"/user/deanonymize", wrapper.PostUserDeanonymize)
	router.POST(options.BaseURL+"/user/email/change", wrapper.PostUserEmailChange)
	router.POST(options.BaseURL+"/user/email/send-verification-email", wrapper.PostUserEmailSendVerificationEmail)
	router.POST(options.BaseURL+"/user/password/reset", wrapper.PostUserPasswordReset)
	router.GET(options.BaseURL+"/version", wrapper.GetVersion)
}

type GetHealthzRequestObject struct {
}

type GetHealthzResponseObject interface {
	VisitGetHealthzResponse(w http.ResponseWriter) error
}

type GetHealthz200JSONResponse OKResponse

func (response GetHealthz200JSONResponse) VisitGetHealthzResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type HeadHealthzRequestObject struct {
}

type HeadHealthzResponseObject interface {
	VisitHeadHealthzResponse(w http.ResponseWriter) error
}

type HeadHealthz200Response struct {
}

func (response HeadHealthz200Response) VisitHeadHealthzResponse(w http.ResponseWriter) error {
	w.WriteHeader(200)
	return nil
}

type PostPatRequestObject struct {
	Body *PostPatJSONRequestBody
}

type PostPatResponseObject interface {
	VisitPostPatResponse(w http.ResponseWriter) error
}

type PostPat200JSONResponse CreatePATResponse

func (response PostPat200JSONResponse) VisitPostPatResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostSigninEmailPasswordRequestObject struct {
	Body *PostSigninEmailPasswordJSONRequestBody
}

type PostSigninEmailPasswordResponseObject interface {
	VisitPostSigninEmailPasswordResponse(w http.ResponseWriter) error
}

type PostSigninEmailPassword200JSONResponse SignInEmailPasswordResponse

func (response PostSigninEmailPassword200JSONResponse) VisitPostSigninEmailPasswordResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostSigninPasswordlessEmailRequestObject struct {
	Body *PostSigninPasswordlessEmailJSONRequestBody
}

type PostSigninPasswordlessEmailResponseObject interface {
	VisitPostSigninPasswordlessEmailResponse(w http.ResponseWriter) error
}

type PostSigninPasswordlessEmail200JSONResponse OKResponse

func (response PostSigninPasswordlessEmail200JSONResponse) VisitPostSigninPasswordlessEmailResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostSigninPatRequestObject struct {
	Body *PostSigninPatJSONRequestBody
}

type PostSigninPatResponseObject interface {
	VisitPostSigninPatResponse(w http.ResponseWriter) error
}

type PostSigninPat200JSONResponse SessionPayload

func (response PostSigninPat200JSONResponse) VisitPostSigninPatResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetSigninSsoProviderRequestObject struct {
	Provider string `json:"provider"`
	Params   GetSigninSsoProviderParams
}

type GetSigninSsoProviderResponseObject interface {
	VisitGetSigninSsoProviderResponse(w http.ResponseWriter) error
}

type GetSigninSsoProvider302ResponseHeaders struct {
	Location  string
	SetCookie string
}

type GetSigninSsoProvider302Response struct {
	Headers GetSigninSsoProvider302ResponseHeaders
}

func (response GetSigninSsoProvider302Response) VisitGetSigninSsoProviderResponse(w http.ResponseWriter) error {
	w.Header().Set("Location", fmt.Sprint(response.Headers.Location))
	w.Header().Set("Set-Cookie", fmt.Sprint(response.Headers.SetCookie))
	w.WriteHeader(302)
	return nil
}

type GetSigninSsoProviderCallbackRequestObject struct {
	Provider string `json:"provider"`
	Params   GetSigninSsoProviderCallbackParams
}

type GetSigninSsoProviderCallbackResponseObject interface {
	VisitGetSigninSsoProviderCallbackResponse(w http.ResponseWriter) error
}

type GetSigninSsoProviderCallback302ResponseHeaders struct {
	Location  string
	SetCookie string
}

type GetSigninSsoProviderCallback302Response struct {
	Headers GetSigninSsoProviderCallback302ResponseHeaders
}

func (response GetSigninSsoProviderCallback302Response) VisitGetSigninSsoProviderCallbackResponse(w http.ResponseWriter) error {
	w.Header().Set("Location", fmt.Sprint(response.Headers.Location))
	w.Header().Set("Set-Cookie", fmt.Sprint(response.Headers.SetCookie))
	w.WriteHeader(302)
	return nil
}

type PostSignupEmailPasswordRequestObject struct {
	Body *PostSignupEmailPasswordJSONRequestBody
}

type PostSignupEmailPasswordResponseObject interface {
	VisitPostSignupEmailPasswordResponse(w http.ResponseWriter) error
}

type PostSignupEmailPassword200JSONResponse SessionPayload

func (response PostSignupEmailPassword200JSONResponse) VisitPostSignupEmailPasswordResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostSignupEmailPassword403JSONResponse ErrorResponse

func (response PostSignupEmailPassword403JSONResponse) VisitPostSignupEmailPasswordResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(403)

	return json.NewEncoder(w).Encode(response)
}

type PostSignupEmailPassword409JSONResponse ErrorResponse

func (response PostSignupEmailPassword409JSONResponse) VisitPostSignupEmailPasswordResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(409)

	return json.NewEncoder(w).Encode(response)
}

type PostSignupWebauthnRequestObject struct {
	Body *PostSignupWebauthnJSONRequestBody
}

type PostSignupWebauthnResponseObject interface {
	VisitPostSignupWebauthnResponse(w http.ResponseWriter) error
}

type PostSignupWebauthn200JSONResponse SignUpWebauthnResponse

func (response PostSignupWebauthn200JSONResponse) VisitPostSignupWebauthnResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostSignupWebauthnVerifyRequestObject struct {
	Body *PostSignupWebauthnVerifyJSONRequestBody
}

type PostSignupWebauthnVerifyResponseObject interface {
	VisitPostSignupWebauthnVerifyResponse(w http.ResponseWriter) error
}

type PostSignupWebauthnVerify200JSONResponse SessionPayload

func (response PostSignupWebauthnVerify200JSONResponse) VisitPostSignupWebauthnVerifyResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostTokenRequestObject struct {
	Body *PostTokenJSONRequestBody
}

type PostTokenResponseObject interface {
	VisitPostTokenResponse(w http.ResponseWriter) error
}

type PostToken200JSONResponse Session

func (response PostToken200JSONResponse) VisitPostTokenResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostUserDeanonymizeRequestObject struct {
	Body *PostUserDeanonymizeJSONRequestBody
}

type PostUserDeanonymizeResponseObject interface {
	VisitPostUserDeanonymizeResponse(w http.ResponseWriter) error
}

type PostUserDeanonymize200JSONResponse OKResponse

func (response PostUserDeanonymize200JSONResponse) VisitPostUserDeanonymizeResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostUserEmailChangeRequestObject struct {
	Body *PostUserEmailChangeJSONRequestBody
}

type PostUserEmailChangeResponseObject interface {
	VisitPostUserEmailChangeResponse(w http.ResponseWriter) error
}

type PostUserEmailChange200JSONResponse OKResponse

func (response PostUserEmailChange200JSONResponse) VisitPostUserEmailChangeResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostUserEmailSendVerificationEmailRequestObject struct {
	Body *PostUserEmailSendVerificationEmailJSONRequestBody
}

type PostUserEmailSendVerificationEmailResponseObject interface {
	VisitPostUserEmailSendVerificationEmailResponse(w http.ResponseWriter) error
}

type PostUserEmailSendVerificationEmail200JSONResponse OKResponse

func (response PostUserEmailSendVerificationEmail200JSONResponse) VisitPostUserEmailSendVerificationEmailResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type PostUserPasswordResetRequestObject struct {
	Body *PostUserPasswordResetJSONRequestBody
}

type PostUserPasswordResetResponseObject interface {
	VisitPostUserPasswordResetResponse(w http.ResponseWriter) error
}

type PostUserPasswordReset200JSONResponse OKResponse

func (response PostUserPasswordReset200JSONResponse) VisitPostUserPasswordResetResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

type GetVersionRequestObject struct {
}

type GetVersionResponseObject interface {
	VisitGetVersionResponse(w http.ResponseWriter) error
}

type GetVersion200JSONResponse struct {
	Version string `json:"version"`
}

func (response GetVersion200JSONResponse) VisitGetVersionResponse(w http.ResponseWriter) error {
	w.Header().Set("Content-Type", "application/json")
	w.WriteHeader(200)

	return json.NewEncoder(w).Encode(response)
}

// StrictServerInterface represents all server handlers.
type StrictServerInterface interface {
	// Health check
	// (GET /healthz)
	GetHealthz(ctx context.Context, request GetHealthzRequestObject) (GetHealthzResponseObject, error)
	// Health check
	// (HEAD /healthz)
	HeadHealthz(ctx context.Context, request HeadHealthzRequestObject) (HeadHealthzResponseObject, error)
	// Create a Personal Access Token (PAT)
	// (POST /pat)
	PostPat(ctx context.Context, request PostPatRequestObject) (PostPatResponseObject, error)
	// Sign in with email and password
	// (POST /signin/email-password)
	PostSigninEmailPassword(ctx context.Context, request PostSigninEmailPasswordRequestObject) (PostSigninEmailPasswordResponseObject, error)
	// Sign in with magic link sent to user's email. If user doesn't exist, it will be created. The options object is optional and can be used to set the user's when signing up a new user. It is ignored if the user already exists.
	// (POST /signin/passwordless/email)
	PostSigninPasswordlessEmail(ctx context.Context, request PostSigninPasswordlessEmailRequestObject) (PostSigninPasswordlessEmailResponseObject, error)
	// Sign in with Personal Access Token (PAT)
	// (POST /signin/pat)
	PostSigninPat(ctx context.Context, request PostSigninPatRequestObject) (PostSigninPatResponseObject, error)
	// Sign in with SSO
	// (GET /signin/sso/{provider})
	GetSigninSsoProvider(ctx context.Context, request GetSigninSsoProviderRequestObject) (GetSigninSsoProviderResponseObject, error)
	// Sign in with SSO (callback)
	// (GET /signin/sso/{provider}/callback)
	GetSigninSsoProviderCallback(ctx context.Context, request GetSigninSsoProviderCallbackRequestObject) (GetSigninSsoProviderCallbackResponseObject, error)
	// Signup with email and password
	// (POST /signup/email-password)
	PostSignupEmailPassword(ctx context.Context, request PostSignupEmailPasswordRequestObject) (PostSignupEmailPasswordResponseObject, error)
	// Signup with webauthn
	// (POST /signup/webauthn)
	PostSignupWebauthn(ctx context.Context, request PostSignupWebauthnRequestObject) (PostSignupWebauthnResponseObject, error)
	// Verify webauthn signup
	// (POST /signup/webauthn/verify)
	PostSignupWebauthnVerify(ctx context.Context, request PostSignupWebauthnVerifyRequestObject) (PostSignupWebauthnVerifyResponseObject, error)
	// Refresh the JWT access token
	// (POST /token)
	PostToken(ctx context.Context, request PostTokenRequestObject) (PostTokenResponseObject, error)
	// Deanonymize an anonymous user in adding missing email or email+password, depending on the chosen authentication method. Will send a confirmation email if the server is configured to do so
	// (POST /user/deanonymize)
	PostUserDeanonymize(ctx context.Context, request PostUserDeanonymizeRequestObject) (PostUserDeanonymizeResponseObject, error)
	// Change user email
	// (POST /user/email/change)
	PostUserEmailChange(ctx context.Context, request PostUserEmailChangeRequestObject) (PostUserEmailChangeResponseObject, error)
	// Send email verification email
	// (POST /user/email/send-verification-email)
	PostUserEmailSendVerificationEmail(ctx context.Context, request PostUserEmailSendVerificationEmailRequestObject) (PostUserEmailSendVerificationEmailResponseObject, error)
	// Request a password reset. An email with a verification link will be sent to the user's address
	// (POST /user/password/reset)
	PostUserPasswordReset(ctx context.Context, request PostUserPasswordResetRequestObject) (PostUserPasswordResetResponseObject, error)
	// Get version
	// (GET /version)
	GetVersion(ctx context.Context, request GetVersionRequestObject) (GetVersionResponseObject, error)
}

type StrictHandlerFunc = strictgin.StrictGinHandlerFunc
type StrictMiddlewareFunc = strictgin.StrictGinMiddlewareFunc

func NewStrictHandler(ssi StrictServerInterface, middlewares []StrictMiddlewareFunc) ServerInterface {
	return &strictHandler{ssi: ssi, middlewares: middlewares}
}

type strictHandler struct {
	ssi         StrictServerInterface
	middlewares []StrictMiddlewareFunc
}

// GetHealthz operation middleware
func (sh *strictHandler) GetHealthz(ctx *gin.Context) {
	var request GetHealthzRequestObject

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.GetHealthz(ctx, request.(GetHealthzRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetHealthz")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(GetHealthzResponseObject); ok {
		if err := validResponse.VisitGetHealthzResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// HeadHealthz operation middleware
func (sh *strictHandler) HeadHealthz(ctx *gin.Context) {
	var request HeadHealthzRequestObject

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.HeadHealthz(ctx, request.(HeadHealthzRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "HeadHealthz")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(HeadHealthzResponseObject); ok {
		if err := validResponse.VisitHeadHealthzResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostPat operation middleware
func (sh *strictHandler) PostPat(ctx *gin.Context) {
	var request PostPatRequestObject

	var body PostPatJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostPat(ctx, request.(PostPatRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostPat")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostPatResponseObject); ok {
		if err := validResponse.VisitPostPatResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostSigninEmailPassword operation middleware
func (sh *strictHandler) PostSigninEmailPassword(ctx *gin.Context) {
	var request PostSigninEmailPasswordRequestObject

	var body PostSigninEmailPasswordJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostSigninEmailPassword(ctx, request.(PostSigninEmailPasswordRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostSigninEmailPassword")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostSigninEmailPasswordResponseObject); ok {
		if err := validResponse.VisitPostSigninEmailPasswordResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostSigninPasswordlessEmail operation middleware
func (sh *strictHandler) PostSigninPasswordlessEmail(ctx *gin.Context) {
	var request PostSigninPasswordlessEmailRequestObject

	var body PostSigninPasswordlessEmailJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostSigninPasswordlessEmail(ctx, request.(PostSigninPasswordlessEmailRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostSigninPasswordlessEmail")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostSigninPasswordlessEmailResponseObject); ok {
		if err := validResponse.VisitPostSigninPasswordlessEmailResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostSigninPat operation middleware
func (sh *strictHandler) PostSigninPat(ctx *gin.Context) {
	var request PostSigninPatRequestObject

	var body PostSigninPatJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostSigninPat(ctx, request.(PostSigninPatRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostSigninPat")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostSigninPatResponseObject); ok {
		if err := validResponse.VisitPostSigninPatResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetSigninSsoProvider operation middleware
func (sh *strictHandler) GetSigninSsoProvider(ctx *gin.Context, provider string, params GetSigninSsoProviderParams) {
	var request GetSigninSsoProviderRequestObject

	request.Provider = provider
	request.Params = params

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.GetSigninSsoProvider(ctx, request.(GetSigninSsoProviderRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetSigninSsoProvider")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(GetSigninSsoProviderResponseObject); ok {
		if err := validResponse.VisitGetSigninSsoProviderResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetSigninSsoProviderCallback operation middleware
func (sh *strictHandler) GetSigninSsoProviderCallback(ctx *gin.Context, provider string, params GetSigninSsoProviderCallbackParams) {
	var request GetSigninSsoProviderCallbackRequestObject

	request.Provider = provider
	request.Params = params

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.GetSigninSsoProviderCallback(ctx, request.(GetSigninSsoProviderCallbackRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetSigninSsoProviderCallback")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(GetSigninSsoProviderCallbackResponseObject); ok {
		if err := validResponse.VisitGetSigninSsoProviderCallbackResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostSignupEmailPassword operation middleware
func (sh *strictHandler) PostSignupEmailPassword(ctx *gin.Context) {
	var request PostSignupEmailPasswordRequestObject

	var body PostSignupEmailPasswordJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostSignupEmailPassword(ctx, request.(PostSignupEmailPasswordRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostSignupEmailPassword")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostSignupEmailPasswordResponseObject); ok {
		if err := validResponse.VisitPostSignupEmailPasswordResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostSignupWebauthn operation middleware
func (sh *strictHandler) PostSignupWebauthn(ctx *gin.Context) {
	var request PostSignupWebauthnRequestObject

	var body PostSignupWebauthnJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostSignupWebauthn(ctx, request.(PostSignupWebauthnRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostSignupWebauthn")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostSignupWebauthnResponseObject); ok {
		if err := validResponse.VisitPostSignupWebauthnResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostSignupWebauthnVerify operation middleware
func (sh *strictHandler) PostSignupWebauthnVerify(ctx *gin.Context) {
	var request PostSignupWebauthnVerifyRequestObject

	var body PostSignupWebauthnVerifyJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostSignupWebauthnVerify(ctx, request.(PostSignupWebauthnVerifyRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostSignupWebauthnVerify")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostSignupWebauthnVerifyResponseObject); ok {
		if err := validResponse.VisitPostSignupWebauthnVerifyResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostToken operation middleware
func (sh *strictHandler) PostToken(ctx *gin.Context) {
	var request PostTokenRequestObject

	var body PostTokenJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostToken(ctx, request.(PostTokenRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostToken")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostTokenResponseObject); ok {
		if err := validResponse.VisitPostTokenResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostUserDeanonymize operation middleware
func (sh *strictHandler) PostUserDeanonymize(ctx *gin.Context) {
	var request PostUserDeanonymizeRequestObject

	var body PostUserDeanonymizeJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostUserDeanonymize(ctx, request.(PostUserDeanonymizeRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostUserDeanonymize")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostUserDeanonymizeResponseObject); ok {
		if err := validResponse.VisitPostUserDeanonymizeResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostUserEmailChange operation middleware
func (sh *strictHandler) PostUserEmailChange(ctx *gin.Context) {
	var request PostUserEmailChangeRequestObject

	var body PostUserEmailChangeJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostUserEmailChange(ctx, request.(PostUserEmailChangeRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostUserEmailChange")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostUserEmailChangeResponseObject); ok {
		if err := validResponse.VisitPostUserEmailChangeResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostUserEmailSendVerificationEmail operation middleware
func (sh *strictHandler) PostUserEmailSendVerificationEmail(ctx *gin.Context) {
	var request PostUserEmailSendVerificationEmailRequestObject

	var body PostUserEmailSendVerificationEmailJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostUserEmailSendVerificationEmail(ctx, request.(PostUserEmailSendVerificationEmailRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostUserEmailSendVerificationEmail")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostUserEmailSendVerificationEmailResponseObject); ok {
		if err := validResponse.VisitPostUserEmailSendVerificationEmailResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// PostUserPasswordReset operation middleware
func (sh *strictHandler) PostUserPasswordReset(ctx *gin.Context) {
	var request PostUserPasswordResetRequestObject

	var body PostUserPasswordResetJSONRequestBody
	if err := ctx.ShouldBindJSON(&body); err != nil {
		ctx.Status(http.StatusBadRequest)
		ctx.Error(err)
		return
	}
	request.Body = &body

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.PostUserPasswordReset(ctx, request.(PostUserPasswordResetRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "PostUserPasswordReset")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(PostUserPasswordResetResponseObject); ok {
		if err := validResponse.VisitPostUserPasswordResetResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// GetVersion operation middleware
func (sh *strictHandler) GetVersion(ctx *gin.Context) {
	var request GetVersionRequestObject

	handler := func(ctx *gin.Context, request interface{}) (interface{}, error) {
		return sh.ssi.GetVersion(ctx, request.(GetVersionRequestObject))
	}
	for _, middleware := range sh.middlewares {
		handler = middleware(handler, "GetVersion")
	}

	response, err := handler(ctx, request)

	if err != nil {
		ctx.Error(err)
		ctx.Status(http.StatusInternalServerError)
	} else if validResponse, ok := response.(GetVersionResponseObject); ok {
		if err := validResponse.VisitGetVersionResponse(ctx.Writer); err != nil {
			ctx.Error(err)
		}
	} else if response != nil {
		ctx.Error(fmt.Errorf("unexpected response type: %T", response))
	}
}

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
